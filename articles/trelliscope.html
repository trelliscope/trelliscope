<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="trelliscope">
<title>Introduction to Trelliscope • trelliscope</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to Trelliscope">
<meta property="og:description" content="trelliscope">
<meta property="og:image" content="https://trelliscope.github.io/trelliscope/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">trelliscope</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.5</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/trelliscope.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/panels.html">Creating Panel Columns</a>
    <a class="dropdown-item" href="../articles/embed.html">Sharing and Embedding Trelliscope</a>
    <a class="dropdown-item" href="../articles/bigdata.html">Visualizing Large Datasets with Trelliscope</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/trelliscope/trelliscope/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Introduction to Trelliscope</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/trelliscope/trelliscope/blob/HEAD/vignettes/trelliscope.Rmd" class="external-link"><code>vignettes/trelliscope.Rmd</code></a></small>
      <div class="d-none name"><code>trelliscope.Rmd</code></div>
    </div>

    
    
<p>Trelliscope provides a simple mechanism to make a collection of
visualizations and display them as interactive <a href="https://en.wikipedia.org/wiki/Small_multiple" class="external-link">small multiples</a>.
This is a useful general visualization technique for many scenarios,
particularly when looking at a somewhat large dataset comprised of many
natural subsets. However, where Trelliscope differentiates itself from
traditional faceting is in layout and interactivity. Traditionally,
facets appear in one large plot that becomes overwhelming with too many
groups. Trelliscope allows you to generate a large number of plots in an
interactive window where the plots can be filtered and sorted based on
metadata and paged through with a limited number of plots at a time.</p>
<p>The Trelliscope R package provides utilities to create the
visualizations, specify metadata about the visualizations that can be
used to interactively navigate them, and specify other aspects of how
the viewer should behave.</p>
<div class="section level2">
<h2 id="data-frames-of-visualizations">Data frames of visualizations<a class="anchor" aria-label="anchor" href="#data-frames-of-visualizations"></a>
</h2>
<p>The basic principle behind the design of the R package is that you
specify a collection of visualizations as a data frame, with one or more
columns representing the plots (either as a plot object such as ggplot
or as a reference to an image such as a png, svg, or even html file),
and the other columns representing metadata about each
visualization.</p>
<p>We refer to each plot (row) of a given visualization (column) as a
<strong>panel</strong>, and hence will often refer to a visualization
column as a collection of panels.</p>
<p>This package provides utilities to help build these data frames and
then explore them in an interactive viewer.</p>
<div class="section level3">
<h3 id="pre-generated-images">Pre-generated images<a class="anchor" aria-label="anchor" href="#pre-generated-images"></a>
</h3>
<p>The simplest way to illustrate what is meant by a data frame of
visualizations is to start with an example where the images have already
been generated.</p>
<p>An example dataset that comes with the package contains images
captured by the Mars rover Curiosity.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://trelliscope.org/trelliscope" class="external-link">trelliscope</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">mars_rover</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1,245 × 11</span></span></span>
<span><span class="co">#&gt;       id camera   sol earth_date class width height filesize hex     hue img_src</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>  <span style="text-decoration: underline;">3</span>560 Mars …   565 2014-03-09 hori…   192    144     <span style="text-decoration: underline;">5</span>656 #7C6…  31.4 http:/…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> <span style="text-decoration: underline;">74</span>689 Mars …   565 2014-03-09 hori…  <span style="text-decoration: underline;">1</span>632   <span style="text-decoration: underline;">1</span>200   <span style="text-decoration: underline;">592</span>880 #7B6…  32.9 http:/…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>  <span style="text-decoration: underline;">3</span>558 Mars …   568 2014-03-12 wheel   192    144     <span style="text-decoration: underline;">9</span>123 #3C3…  33.9 http:/…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> <span style="text-decoration: underline;">74</span>630 Mars …   568 2014-03-12 wheel  <span style="text-decoration: underline;">1</span>632   <span style="text-decoration: underline;">1</span>200   <span style="text-decoration: underline;">567</span>528 #4F4…  31.1 http:/…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> <span style="text-decoration: underline;">74</span>631 Mars …   568 2014-03-12 wheel  <span style="text-decoration: underline;">1</span>632   <span style="text-decoration: underline;">1</span>200   <span style="text-decoration: underline;">556</span>007 #4B4…  32.5 http:/…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> <span style="text-decoration: underline;">74</span>632 Mars …   568 2014-03-12 wheel  <span style="text-decoration: underline;">1</span>632   <span style="text-decoration: underline;">1</span>200   <span style="text-decoration: underline;">721</span>995 #564…  33.1 http:/…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> <span style="text-decoration: underline;">74</span>633 Mars …   568 2014-03-12 wheel  <span style="text-decoration: underline;">1</span>632   <span style="text-decoration: underline;">1</span>200   <span style="text-decoration: underline;">511</span>984 #433…  32.3 http:/…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> <span style="text-decoration: underline;">74</span>634 Mars …   568 2014-03-12 wheel  <span style="text-decoration: underline;">1</span>632   <span style="text-decoration: underline;">1</span>200   <span style="text-decoration: underline;">523</span>267 #3C3…  32.3 http:/…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> <span style="text-decoration: underline;">74</span>635 Mars …   568 2014-03-12 wheel  <span style="text-decoration: underline;">1</span>632   <span style="text-decoration: underline;">1</span>200   <span style="text-decoration: underline;">580</span>228 #3D3…  32.5 http:/…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> <span style="text-decoration: underline;">74</span>637 Mars …   568 2014-03-12 wheel   192    144    <span style="text-decoration: underline;">10</span>522 #4E4…  32.3 http:/…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1,235 more rows</span></span></span></code></pre></div>
<p>This data frame has a column that references images on the web,
<code>img_src</code>. The other columns contain metadata about these
images. We can create a Trelliscope data frame from this with the
following:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as_trelliscope_df.html">as_trelliscope_df</a></span><span class="op">(</span><span class="va">mars_rover</span>, name <span class="op">=</span> <span class="st">"mars rover"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Using the variable <span style="color: #0000BB;">"id"</span> to uniquely identify each row</span></span>
<span><span class="co">#&gt; of the data.</span></span>
<span></span>
<span><span class="va">d</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Trelliscope data frame: <span style="color: #0000BB;">"mars rover"</span> located at</span></span>
<span><span class="co">#&gt;   <span style="color: #0000BB;">"/home/runner/work/trelliscope/trelliscope/docs/articles/trelliscope_files/figure-html//mars0"</span></span></span>
<span><span class="co">#&gt;   with <span style="color: #0000BB;">1</span> panel:</span></span>
<span><span class="co">#&gt; • <span style="color: #0000BB;">"img_src"</span>: &lt;panel_url&gt;   <span style="color: #555555;">[no panel options specified]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1,245 × 11</span></span></span>
<span><span class="co">#&gt;       id camera   sol earth_date class width height filesize hex     hue img_src</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;url_p&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>  <span style="text-decoration: underline;">3</span>560 Mars …   565 2014-03-09 hori…   192    144     <span style="text-decoration: underline;">5</span>656 #7C6…  31.4 &lt;img&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> <span style="text-decoration: underline;">74</span>689 Mars …   565 2014-03-09 hori…  <span style="text-decoration: underline;">1</span>632   <span style="text-decoration: underline;">1</span>200   <span style="text-decoration: underline;">592</span>880 #7B6…  32.9 &lt;img&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>  <span style="text-decoration: underline;">3</span>558 Mars …   568 2014-03-12 wheel   192    144     <span style="text-decoration: underline;">9</span>123 #3C3…  33.9 &lt;img&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> <span style="text-decoration: underline;">74</span>630 Mars …   568 2014-03-12 wheel  <span style="text-decoration: underline;">1</span>632   <span style="text-decoration: underline;">1</span>200   <span style="text-decoration: underline;">567</span>528 #4F4…  31.1 &lt;img&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> <span style="text-decoration: underline;">74</span>631 Mars …   568 2014-03-12 wheel  <span style="text-decoration: underline;">1</span>632   <span style="text-decoration: underline;">1</span>200   <span style="text-decoration: underline;">556</span>007 #4B4…  32.5 &lt;img&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> <span style="text-decoration: underline;">74</span>632 Mars …   568 2014-03-12 wheel  <span style="text-decoration: underline;">1</span>632   <span style="text-decoration: underline;">1</span>200   <span style="text-decoration: underline;">721</span>995 #564…  33.1 &lt;img&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> <span style="text-decoration: underline;">74</span>633 Mars …   568 2014-03-12 wheel  <span style="text-decoration: underline;">1</span>632   <span style="text-decoration: underline;">1</span>200   <span style="text-decoration: underline;">511</span>984 #433…  32.3 &lt;img&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> <span style="text-decoration: underline;">74</span>634 Mars …   568 2014-03-12 wheel  <span style="text-decoration: underline;">1</span>632   <span style="text-decoration: underline;">1</span>200   <span style="text-decoration: underline;">523</span>267 #3C3…  32.3 &lt;img&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> <span style="text-decoration: underline;">74</span>635 Mars …   568 2014-03-12 wheel  <span style="text-decoration: underline;">1</span>632   <span style="text-decoration: underline;">1</span>200   <span style="text-decoration: underline;">580</span>228 #3D3…  32.5 &lt;img&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> <span style="text-decoration: underline;">74</span>637 Mars …   568 2014-03-12 wheel   192    144    <span style="text-decoration: underline;">10</span>522 #4E4…  32.3 &lt;img&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1,235 more rows</span></span></span></code></pre></div>
<p>This is simply the same data frame but with additional information
for how to render the Trelliscope viewer app. At a minimum we provide a
<code>name</code> for the resulting display, but we can also specify
additional information such as a <code>path</code> to where we want the
output to be written (a temporary directory if not specified), and a
<code>description</code> and <code>tags</code>. You can also specify the
<code>key_cols</code> which are the columns that combined, uniquely
identify each row of the data. This is inferred if not provided but
sometimes might not be what you would like it to be, as there often are
many possibilities.</p>
<p>To see more information about trelliscope-specific settings, you can
use <code><a href="../reference/show_info.html">show_info()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/show_info.html">show_info</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span>
<span><span class="co">#&gt; A trelliscope display</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="font-weight: bold;">Name</span>: <span style="color: #0000BB;">"mars rover"</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="font-weight: bold;">Description</span>: <span style="color: #0000BB;">"mars rover"</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="font-weight: bold;">Tags</span>: <span style="font-style: italic;">none</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="font-weight: bold;">Key columns</span>: <span style="color: #0000BB;">"id"</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="font-weight: bold;">Path</span>:</span></span>
<span><span class="co">#&gt;   <span style="color: #9E9E9E;">"/home/runner/work/trelliscope/trelliscope/docs/articles/trelliscope_files/figure-html//mars0"</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="font-weight: bold;">Number of panels</span>: <span style="color: #0000BB;">1245</span></span></span></code></pre></div>
<p>Now to view this in the Trelliscope viewer app:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/view_trelliscope.html">view_trelliscope</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Inferred that variable 'filesize' should be shown on log scale.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> No default <span style="color: #0000BB;">"layout"</span> state supplied. <span style="font-style: italic;">Using ncol=3.</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> No default <span style="color: #0000BB;">"labels"</span> state supplied. <span style="font-style: italic;">Using id.</span></span></span></code></pre></div>
<div style="width: 100%; height: 520px; padding-bottom: 5px;">
<iframe style="
        transform: scale(0.7);
        width: 142.857142857143%;
        height: 742.857142857143px;
        margin: 0;
        padding: 0;
        border: 1px solid #efefef;
        transform-origin: top left;
      " src="trelliscope_files/figure-html//mars0/index.html" title="mars rover" width="142.857142857143%px" height="742.857142857143pxpx" allowfullscreen>
</iframe>
</div>
<p>You can use this viewer to interactively explore the images through
filtering, sorting, and paging through the panels. Feel free to try out
the example above! You can click the icon in the upper-right corner for
a full-screen view of the viewer.</p>
<p>The behavior of the Trelliscope viewer can be customized in many
ways, either through augmenting the data frame with new data, or by
specifying additional visualizations, default sorting and filtering, and
many other options. We will cover these throughout this document.</p>
</div>
<div class="section level3">
<h3 id="r-generated-visualizations">R-generated visualizations<a class="anchor" aria-label="anchor" href="#r-generated-visualizations"></a>
</h3>
<p>A likely more common use case when visualizing data during an
analysis will be that the images do not yet exist and we will be
generating them from subsets of the data we are analyzing. Trelliscope
has utilities to make this convenient for visualization packages like
ggplot2.</p>
<p>As a simple example, let’s consider the <code>gap</code> dataset
which is a modified version of data that originally comes with the <a href="https://cran.r-project.org/web/packages/gapminder/index.html" class="external-link"><code>gapminder</code></a>
package. This modified version contains some extra columns such as ISO
country code and country centroid latitude and longitude.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gap</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1,704 × 9</span></span></span>
<span><span class="co">#&gt;    country     continent  year life_exp    pop gdp_percap iso_alpha2   lat   lon</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>952     28.8 8.43<span style="color: #949494;">e</span>6       779. AF            33    65</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>957     30.3 9.24<span style="color: #949494;">e</span>6       821. AF            33    65</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>962     32.0 1.03<span style="color: #949494;">e</span>7       853. AF            33    65</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>967     34.0 1.15<span style="color: #949494;">e</span>7       836. AF            33    65</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>972     36.1 1.31<span style="color: #949494;">e</span>7       740. AF            33    65</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>977     38.4 1.49<span style="color: #949494;">e</span>7       786. AF            33    65</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>982     39.9 1.29<span style="color: #949494;">e</span>7       978. AF            33    65</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>987     40.8 1.39<span style="color: #949494;">e</span>7       852. AF            33    65</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>992     41.7 1.63<span style="color: #949494;">e</span>7       649. AF            33    65</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>997     41.8 2.22<span style="color: #949494;">e</span>7       635. AF            33    65</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1,694 more rows</span></span></span></code></pre></div>
<p>This data provides statistics such as life expectancy annually for
123 countries.</p>
<p>Suppose we want to visualize life expectancy vs. year for each
country. With ggplot2, you would do something like this:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">gap</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">life_exp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">continent</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="trelliscope_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>There are too many panels to view on one page, making this a good
candidate for Trelliscope.</p>
<p>Trelliscope provides a function <code><a href="../reference/facet_panels.html">facet_panels()</a></code> that is
the first step in turning a ggplot object into a Trelliscope data frame.
You can swap out <code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap()</a></code> for this function.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">gap</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">life_exp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/facet_panels.html">facet_panels</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">continent</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "facet_panels" "gg"           "ggplot"</span></span></code></pre></div>
<p>As you can see, <code><a href="../reference/facet_panels.html">facet_panels()</a></code> simply modifies your
ggplot object. If you print the resulting object <code>p</code>, a
Trelliscope display will be written and displayed.</p>
<p>To take this and turn it into a data frame of visualizations with one
row for each country/continent, we can apply the function
<code><a href="../reference/as_panels_df.html">as_panels_df()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as_panels_df.html">as_panels_df</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p_df</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 142 × 3</span></span></span>
<span><span class="co">#&gt;    country     continent panel     </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;ggpanels&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Afghanistan Asia      &lt;ggplot&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Albania     Europe    &lt;ggplot&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Algeria     Africa    &lt;ggplot&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Angola      Africa    &lt;ggplot&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Argentina   Americas  &lt;ggplot&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Australia   Oceania   &lt;ggplot&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Austria     Europe    &lt;ggplot&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Bahrain     Asia      &lt;ggplot&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Bangladesh  Asia      &lt;ggplot&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Belgium     Europe    &lt;ggplot&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 132 more rows</span></span></span></code></pre></div>
<p>Here, just as in the Mars rover example, we have a data frame of
visualizations. However, in this case, the visualizations are ggplot
objects instead of image references.</p>
<p>Note that <code><a href="../reference/as_panels_df.html">as_panels_df()</a></code> has options such as
<code>as_plotly = TRUE</code> that will convert the ggplot objects to
plotly objects.</p>
<p>You can view the plot for any one row by calling the panel column and
the index number of the row you want to look at. For example, if you
wanted to see the generated plot for the second row, Albania, you would
run the following code.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p_df</span><span class="op">$</span><span class="va">panel</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt; &lt;ggpanel_vec[1]&gt;</span></span></code></pre></div>
<p><img src="trelliscope_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<pre><code><span><span class="co">#&gt; [1] &lt;ggplot&gt;</span></span></code></pre>
<p>Note that this nested data frame of visualizations can be a useful
object to work with outside of using it with Trelliscope.</p>
<p>Just as in the Mars rover example, we can view this data frame of
visualizations and cast it as a Trelliscope data frame with
<code><a href="../reference/as_trelliscope_df.html">as_trelliscope_df()</a></code> and view it with
<code><a href="../reference/view_trelliscope.html">view_trelliscope()</a></code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as_trelliscope_df.html">as_trelliscope_df</a></span><span class="op">(</span><span class="va">p_df</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"gapminder life expectancy"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/view_trelliscope.html">view_trelliscope</a></span><span class="op">(</span><span class="va">tdf</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> No default <span style="color: #0000BB;">"layout"</span> state supplied. <span style="font-style: italic;">Using ncol=3.</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> No default <span style="color: #0000BB;">"labels"</span> state supplied. <span style="font-style: italic;">Using country, continent.</span></span></span>
<span><span class="co">#&gt; Writing panel <span style="color: #00BB00;">■■■                             </span>   6% | ETA: 19s</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Writing panel <span style="color: #00BB00;">■■■■■■                          </span>  18% | ETA: 16s</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Writing panel <span style="color: #00BB00;">■■■■■■■■■■■                     </span>  33% | ETA: 13s</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Writing panel <span style="color: #00BB00;">■■■■■■■■■■■■■■■                 </span>  48% | ETA: 11s</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Writing panel <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■            </span>  63% | ETA:  8s</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Writing panel <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■        </span>  77% | ETA:  5s</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Writing panel <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■    </span>  92% | ETA:  2s</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Writing panel <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span> 100% | ETA:  0s</span></span></code></pre></div>
<div style="width: 100%; height: 520px; padding-bottom: 5px;">
<iframe style="
        transform: scale(0.7);
        width: 142.857142857143%;
        height: 742.857142857143px;
        margin: 0;
        padding: 0;
        border: 1px solid #efefef;
        transform-origin: top left;
      " src="trelliscope_files/figure-html//gap0/index.html" title="gapminder life expectancy" width="142.857142857143%px" height="742.857142857143pxpx" allowfullscreen>
</iframe>
</div>
<p>Note that there are several benefits to using
<code><a href="../reference/facet_panels.html">facet_panels()</a></code> and <code><a href="../reference/as_panels_df.html">as_panels_df()</a></code>. First, it
fits more naturally into the ggplot2 paradigm, where you can build a
Trelliscope visualization exactly as you would with building a ggplot2
visualization. Second, you can make use of the <code>scales</code>
argument in <code><a href="../reference/facet_panels.html">facet_panels()</a></code> (which behaves similarly to the
same argument in <code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap()</a></code>) to ensure that the x and y
axis ranges of your plots behave the way you want. The default is for
all plots to have the same <code>"fixed"</code> axis ranges. This is an
important consideration in visualizing small multiples because if you
are making visual comparisons you often want to be comparing things on
the same scale.</p>
<p>The remainder of this tutorial will cover customizations that you can
apply to Trelliscope data frames to provide more powerful interactions
when viewing them in the app.</p>
</div>
</div>
<div class="section level2">
<h2 id="customizing-your-trelliscope-app">Customizing your Trelliscope app<a class="anchor" aria-label="anchor" href="#customizing-your-trelliscope-app"></a>
</h2>
<p>So far we have seen a few ways to get to a Trelliscope data frame
that we can use to create a Trelliscope interactive visualization app.
As we’ve seen, you can simply pass a Trelliscope data frame to
<code><a href="../reference/view_trelliscope.html">view_trelliscope()</a></code> to get to an immediate output. However,
there are many other operations you can perform on a Trelliscope data
frame to customize how the app behaves.</p>
<p>Let’s revisit the gapminder example. Here we re-build a data frame of
ggplot panels in one code block.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tdf</span> <span class="op">&lt;-</span> <span class="op">(</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">gap</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">life_exp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/facet_panels.html">facet_panels</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">continent</span>, <span class="va">iso_alpha2</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/as_panels_df.html">as_panels_df</a></span><span class="op">(</span>panel_col <span class="op">=</span> <span class="st">"lexp_time"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/as_trelliscope_df.html">as_trelliscope_df</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"gapminder life expectancy"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tdf</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Trelliscope data frame: <span style="color: #0000BB;">"gapminder life expectancy"</span> located at</span></span>
<span><span class="co">#&gt;   <span style="color: #0000BB;">"/home/runner/work/trelliscope/trelliscope/docs/articles/trelliscope_files/figure-html//gap1"</span></span></span>
<span><span class="co">#&gt;   with <span style="color: #0000BB;">1</span> panel:</span></span>
<span><span class="co">#&gt; • <span style="color: #0000BB;">"lexp_time"</span>: &lt;ggpanel&gt;     <span style="color: #555555;">[no panel options specified]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 142 × 4</span></span></span>
<span><span class="co">#&gt;    country     continent iso_alpha2 lexp_time </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;ggpanels&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Afghanistan Asia      AF         &lt;ggplot&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Albania     Europe    AL         &lt;ggplot&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Algeria     Africa    DZ         &lt;ggplot&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Angola      Africa    AO         &lt;ggplot&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Argentina   Americas  AR         &lt;ggplot&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Australia   Oceania   AU         &lt;ggplot&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Austria     Europe    AT         &lt;ggplot&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Bahrain     Asia      BH         &lt;ggplot&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Bangladesh  Asia      BD         &lt;ggplot&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Belgium     Europe    BE         &lt;ggplot&gt;  </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 132 more rows</span></span></span></code></pre></div>
<p>Here we also added <code>iso_alpha2</code> (country code) as a
redundant facetting variable so that it is available in our data frame
for later use.</p>
<div class="section level3">
<h3 id="adding-panels">Adding panels<a class="anchor" aria-label="anchor" href="#adding-panels"></a>
</h3>
<p>Our data frame already has a panel column, but we can add more if we
would like. The following functions are available to add panels to a
Trelliscope data frame.</p>
<ul>
<li>
<code><a href="../reference/panel_url.html">panel_url()</a></code>: Add a panel column with URLs to
images</li>
<li>
<code><a href="../reference/panel_local.html">panel_local()</a></code>: Add a panel column with local image
files</li>
<li>
<code><a href="../reference/panel_lazy.html">panel_lazy()</a></code>: Add a panel column by specifying a plot
function that will be used to generate panels</li>
</ul>
<p>Here we will show an example of using <code><a href="../reference/panel_url.html">panel_url()</a></code> to add
a country flag images to our data frame. In another article we will <a href="panels.html">provide more examples of using these functions</a>.
Note that a variation of <code><a href="../reference/panel_lazy.html">panel_lazy()</a></code> is used underneath
the hood when you use <code><a href="../reference/facet_panels.html">facet_panels()</a></code>.</p>
<p>A database of country flags is available <a href="https://raw.githubusercontent.com/hafen/countryflags/master/png/512/" class="external-link">here</a>
and flag images can be referenced by their 2-letter country code.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">flag_base_url</span> <span class="op">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/hafen/countryflags/master/png/512/"</span></span>
<span></span>
<span><span class="va">tdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">tdf</span>,</span>
<span>  flag_url <span class="op">=</span> <span class="fu"><a href="../reference/panel_url.html">panel_url</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">flag_base_url</span>, <span class="va">iso_alpha2</span>, <span class="st">".png"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">tdf</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Trelliscope data frame: <span style="color: #0000BB;">"gapminder life expectancy"</span> located at</span></span>
<span><span class="co">#&gt;   <span style="color: #0000BB;">"/home/runner/work/trelliscope/trelliscope/docs/articles/trelliscope_files/figure-html//gap1"</span></span></span>
<span><span class="co">#&gt;   with <span style="color: #0000BB;">2</span> panels:</span></span>
<span><span class="co">#&gt; • <span style="color: #0000BB;">"lexp_time"</span>: &lt;ggpanel&gt;     <span style="color: #555555;">[no panel options specified]</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • <span style="color: #0000BB;">"flag_url"</span> : &lt;panel_url&gt;   <span style="color: #555555;">[no panel options specified]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 142 × 5</span></span></span>
<span><span class="co">#&gt;    country     continent iso_alpha2 lexp_time  flag_url            </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;ggpanels&gt;</span> <span style="color: #949494; font-style: italic;">&lt;url_panels&gt;</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Afghanistan Asia      AF         &lt;ggplot&gt;   &lt;img&gt;<span style="color: #949494;"> .../512/AF.png</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Albania     Europe    AL         &lt;ggplot&gt;   &lt;img&gt;<span style="color: #949494;"> .../512/AL.png</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Algeria     Africa    DZ         &lt;ggplot&gt;   &lt;img&gt;<span style="color: #949494;"> .../512/DZ.png</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Angola      Africa    AO         &lt;ggplot&gt;   &lt;img&gt;<span style="color: #949494;"> .../512/AO.png</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Argentina   Americas  AR         &lt;ggplot&gt;   &lt;img&gt;<span style="color: #949494;"> .../512/AR.png</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Australia   Oceania   AU         &lt;ggplot&gt;   &lt;img&gt;<span style="color: #949494;"> .../512/AU.png</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Austria     Europe    AT         &lt;ggplot&gt;   &lt;img&gt;<span style="color: #949494;"> .../512/AT.png</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Bahrain     Asia      BH         &lt;ggplot&gt;   &lt;img&gt;<span style="color: #949494;"> .../512/BH.png</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Bangladesh  Asia      BD         &lt;ggplot&gt;   &lt;img&gt;<span style="color: #949494;"> .../512/BD.png</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Belgium     Europe    BE         &lt;ggplot&gt;   &lt;img&gt;<span style="color: #949494;"> .../512/BE.png</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 132 more rows</span></span></span></code></pre></div>
<p>We can view a flag for any country by looking at a single entry from
the column, e.g. <code>tdf$flag_url[[1]]</code>. This will open up the
image in a web browser.</p>
</div>
<div class="section level3">
<h3 id="adding-variables">Adding variables<a class="anchor" aria-label="anchor" href="#adding-variables"></a>
</h3>
<p>One of the most useful things you can do to customize your
Trelliscope app is to add additional variables to the data frame. These
variables can be used to control how the panels are explored in the
viewer through sorting, filtering, and labels.</p>
<p>For example, suppose we want to be able to explore countries based on
summary statistics such as their mean life expectancy, etc. We can do
this by computing a summaries of the gapminder data and joining this
with <code>tdf</code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gsumm</span> <span class="op">&lt;-</span> <span class="va">gap</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>pct_chg <span class="op">=</span> <span class="fl">100</span> <span class="op">*</span> <span class="op">(</span><span class="va">life_exp</span> <span class="op">-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="va">life_exp</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="va">life_exp</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    mean_lexp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">life_exp</span><span class="op">)</span>,</span>
<span>    mean_gdp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">gdp_percap</span><span class="op">)</span>,</span>
<span>    max_lexp_pct_chg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">pct_chg</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    dt_lexp_max_pct_chg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">year</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.min.html" class="external-link">which.max</a></span><span class="op">(</span><span class="va">pct_chg</span><span class="op">)</span><span class="op">]</span>, <span class="st">"-01-01"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    .by <span class="op">=</span> <span class="va">country</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">tdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">tdf</span>, <span class="va">gsumm</span>, by <span class="op">=</span> <span class="st">"country"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tdf</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Trelliscope data frame: <span style="color: #0000BB;">"gapminder life expectancy"</span> located at</span></span>
<span><span class="co">#&gt;   <span style="color: #0000BB;">"/home/runner/work/trelliscope/trelliscope/docs/articles/trelliscope_files/figure-html//gap1"</span></span></span>
<span><span class="co">#&gt;   with <span style="color: #0000BB;">2</span> panels:</span></span>
<span><span class="co">#&gt; • <span style="color: #0000BB;">"lexp_time"</span>: &lt;ggpanel&gt;     <span style="color: #555555;">[no panel options specified]</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • <span style="color: #0000BB;">"flag_url"</span> : &lt;panel_url&gt;   <span style="color: #555555;">[no panel options specified]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 142 × 9</span></span></span>
<span><span class="co">#&gt;    country     continent iso_alpha2 lexp_time  flag_url     mean_lexp mean_gdp</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;ggpanels&gt;</span> <span style="color: #949494; font-style: italic;">&lt;url_panels&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Afghanistan Asia      AF         &lt;ggplot&gt;   &lt;img&gt;             37.5     803.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Albania     Europe    AL         &lt;ggplot&gt;   &lt;img&gt;             68.4    <span style="text-decoration: underline;">3</span>255.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Algeria     Africa    DZ         &lt;ggplot&gt;   &lt;img&gt;             59.0    <span style="text-decoration: underline;">4</span>426.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Angola      Africa    AO         &lt;ggplot&gt;   &lt;img&gt;             37.9    <span style="text-decoration: underline;">3</span>607.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Argentina   Americas  AR         &lt;ggplot&gt;   &lt;img&gt;             69.1    <span style="text-decoration: underline;">8</span>956.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Australia   Oceania   AU         &lt;ggplot&gt;   &lt;img&gt;             74.7   <span style="text-decoration: underline;">19</span>981.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Austria     Europe    AT         &lt;ggplot&gt;   &lt;img&gt;             73.1   <span style="text-decoration: underline;">20</span>412.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Bahrain     Asia      BH         &lt;ggplot&gt;   &lt;img&gt;             65.6   <span style="text-decoration: underline;">18</span>078.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Bangladesh  Asia      BD         &lt;ggplot&gt;   &lt;img&gt;             49.8     818.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Belgium     Europe    BE         &lt;ggplot&gt;   &lt;img&gt;             73.6   <span style="text-decoration: underline;">19</span>901.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 132 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: max_lexp_pct_chg &lt;dbl&gt;, dt_lexp_max_pct_chg &lt;date&gt;</span></span></span></code></pre></div>
<p>Trelliscope makes use of variable types to determine how data is
displayed in the viewer as well as how it can be interacted with.
Built-in R types such as “character”, “factor”, “numeric”, “Date”, and
“POSIXct”, are all supported. Character and factor variables have a
filter interaction that allows you to filter the data by the values of
the variable (with factors, the natural order of these values is
according to the factor levels). Numeric, date and POSIXct variables
have a range filter interaction that allows you to filter the data by a
range of numbers/dates/times.</p>
</div>
<div class="section level3">
<h3 id="special-variable-types">Special variable types<a class="anchor" aria-label="anchor" href="#special-variable-types"></a>
</h3>
<p>Trelliscope provides some additional variable types that can be used
to provide special functionality in the viewer. Currently, the following
are provided:</p>
<ul>
<li>
<code><a href="../reference/number.html">number()</a></code>: Specifies a numeric type that allows
specification of number of digits to display and whether to show the
variable on the log scale.</li>
<li>
<code><a href="../reference/currency.html">currency()</a></code>: Specifies a numeric type that represents a
currency and can have a currency symbol prepended to it.</li>
<li>
<code><a href="../reference/href.html">href()</a></code>: Specifies a character type that represents a
URL to link to.</li>
</ul>
<p>These types make use of the <a href="https://vctrs.r-lib.org" class="external-link">vctrs</a> package. You can create
variables of these types by simply wrapping a vector with these
functions and any additional paramters.</p>
<p>For example, below we add an example of each of these variables to
our gapminder data frame:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tdf</span> <span class="op">&lt;-</span> <span class="va">tdf</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    mean_lexp <span class="op">=</span> <span class="fu"><a href="../reference/number.html">number</a></span><span class="op">(</span><span class="va">mean_lexp</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>    mean_gdp <span class="op">=</span> <span class="fu"><a href="../reference/currency.html">currency</a></span><span class="op">(</span><span class="va">mean_gdp</span>, code <span class="op">=</span> <span class="st">"USD"</span><span class="op">)</span>,</span>
<span>    wiki_link <span class="op">=</span> <span class="fu"><a href="../reference/href.html">href</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"https://en.wikipedia.org/wiki/"</span>, <span class="va">country</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">tdf</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Trelliscope data frame: <span style="color: #0000BB;">"gapminder life expectancy"</span> located at</span></span>
<span><span class="co">#&gt;   <span style="color: #0000BB;">"/home/runner/work/trelliscope/trelliscope/docs/articles/trelliscope_files/figure-html//gap1"</span></span></span>
<span><span class="co">#&gt;   with <span style="color: #0000BB;">2</span> panels:</span></span>
<span><span class="co">#&gt; • <span style="color: #0000BB;">"lexp_time"</span>: &lt;ggpanel&gt;     <span style="color: #555555;">[no panel options specified]</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • <span style="color: #0000BB;">"flag_url"</span> : &lt;panel_url&gt;   <span style="color: #555555;">[no panel options specified]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 142 × 10</span></span></span>
<span><span class="co">#&gt;    country     continent iso_alpha2 lexp_time  flag_url     mean_lexp   mean_gdp</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;ggpanels&gt;</span> <span style="color: #949494; font-style: italic;">&lt;url_panels&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;number&gt;</span> <span style="color: #949494; font-style: italic;">&lt;currency&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Afghanistan Asia      AF         &lt;ggplot&gt;   &lt;img&gt;             37.5     802.67</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Albania     Europe    AL         &lt;ggplot&gt;   &lt;img&gt;             68.4    3255.37</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Algeria     Africa    DZ         &lt;ggplot&gt;   &lt;img&gt;             59.0    4426.03</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Angola      Africa    AO         &lt;ggplot&gt;   &lt;img&gt;             37.9    3607.10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Argentina   Americas  AR         &lt;ggplot&gt;   &lt;img&gt;             69.1    8955.55</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Australia   Oceania   AU         &lt;ggplot&gt;   &lt;img&gt;             74.7   19980.60</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Austria     Europe    AT         &lt;ggplot&gt;   &lt;img&gt;             73.1   20411.92</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Bahrain     Asia      BH         &lt;ggplot&gt;   &lt;img&gt;             65.6   18077.66</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Bangladesh  Asia      BD         &lt;ggplot&gt;   &lt;img&gt;             49.8     817.56</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Belgium     Europe    BE         &lt;ggplot&gt;   &lt;img&gt;             73.6   19900.76</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 132 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: max_lexp_pct_chg &lt;dbl&gt;, dt_lexp_max_pct_chg &lt;date&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   wiki_link &lt;href&gt;</span></span></span></code></pre></div>
<p>More special variable types will come in the future as supporting
filter interactions are added for them in the viewer. Some types we
anticipate include geographic coordinates, network graph links, and
more.</p>
</div>
<div class="section level3">
<h3 id="updating-display-attributes-with-pipe-functions">Updating display attributes with pipe functions<a class="anchor" aria-label="anchor" href="#updating-display-attributes-with-pipe-functions"></a>
</h3>
<p>A Trelliscope data frame is simply a data frame that also keeps track
of attributes about the Trelliscope display. We can modify these
attributes by applying pipe functions <a href="https://r4ds.had.co.nz/pipes.html" class="external-link">pipe functions</a> that take a
Trelliscope data frame as its primary argument and return a modified
Trelliscope data frame.</p>
<p>The following pipe functions are available:</p>
<ul>
<li>Fine-tune how panels and variables are handled in the app
<ul>
<li><code><a href="../reference/set_panel_options.html">set_panel_options()</a></code></li>
<li><code><a href="../reference/set_var_labels.html">set_var_labels()</a></code></li>
<li><code><a href="../reference/set_tags.html">set_tags()</a></code></li>
</ul>
</li>
<li>Set the default viewing state of the app
<ul>
<li><code>set_default_panel()</code></li>
<li><code><a href="../reference/set_default_filters.html">set_default_filters()</a></code></li>
<li><code><a href="../reference/set_default_labels.html">set_default_labels()</a></code></li>
<li><code><a href="../reference/set_default_layout.html">set_default_layout()</a></code></li>
<li><code><a href="../reference/set_default_sort.html">set_default_sort()</a></code></li>
</ul>
</li>
<li>Additional features
<ul>
<li>
<code><a href="../reference/add_inputs.html">add_inputs()</a></code>: specify input variables that capture user
feedback for each panel</li>
<li>
<code><a href="../reference/add_view.html">add_view()</a></code>: add a pre-defined “view” that allows users
to navigate to specified states of the display</li>
<li>
<code><a href="../reference/set_info_html.html">set_info_html()</a></code>: specify HTML to display in the info
panel of the viewer</li>
<li>
<code><a href="../reference/set_show_info_on_load.html">set_show_info_on_load()</a></code>: specify whether to show the
info panel on load</li>
<li>
<code><a href="../reference/add_charm.html">add_charm()</a></code>: simple password protection for the
generated app</li>
</ul>
</li>
<li>Writing and viewing
<ul>
<li><code><a href="../reference/write_trelliscope.html">write_trelliscope()</a></code></li>
<li><code><a href="../reference/view_trelliscope.html">view_trelliscope()</a></code></li>
</ul>
</li>
</ul>
<p>We will show examples of several of these in the following
sections.</p>
</div>
<div class="section level3">
<h3 id="setting-variable-labels-and-tags">Setting variable labels and tags<a class="anchor" aria-label="anchor" href="#setting-variable-labels-and-tags"></a>
</h3>
<p>To help a user have a better understanding of what the variables
represent and how they are associated, we can use variable labels and
tags.</p>
<p>Variable labels can be added to a Trelliscope data frame using
<code><a href="../reference/set_var_labels.html">set_var_labels()</a></code>. This function takes a named set of
parameters as input, with the names indicating the variable name and the
values indicating the labels. For example:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tdf</span> <span class="op">&lt;-</span> <span class="va">tdf</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/set_var_labels.html">set_var_labels</a></span><span class="op">(</span></span>
<span>    mean_lexp <span class="op">=</span> <span class="st">"Mean life expectancy"</span>,</span>
<span>    mean_gdp <span class="op">=</span> <span class="st">"Mean GDP per capita"</span>,</span>
<span>    max_lexp_pct_chg <span class="op">=</span> <span class="st">"Max % year-to-year change in life expectancy"</span>,</span>
<span>    dt_lexp_max_pct_chg <span class="op">=</span> <span class="st">"Date of max % year-to-year change in life expectancy"</span>,</span>
<span>    wiki_link <span class="op">=</span> <span class="st">"Link to country Wikipedia entry"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Note that this function simply adds a “label” attribute to each
specified column, which is a common practice in R for handling labels in
data frames. If your data frame is already labeled or you have other
means of adding these attributes, you do not need to use this
function.</p>
<p>When there are many variables in a display, it can be useful to add
tags to variables that help the user investigate variables associated
with concepts of interest. Tags can be added to a Trelliscope data frame
using <code><a href="../reference/set_tags.html">set_tags()</a></code>. This function takes a named set of
parameters as input, with the names indicating the tag name and the
values indicating the variable names to associate with that tag. For
example, below we have a tag indicating variables representing computed
country “stats” and a tag that indicates variables containing “info”
about a country.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tdf</span> <span class="op">&lt;-</span> <span class="va">tdf</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/set_tags.html">set_tags</a></span><span class="op">(</span></span>
<span>    stats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mean_lexp"</span>, <span class="st">"mean_gdp"</span>, <span class="st">"max_lexp_pct_chg"</span><span class="op">)</span>,</span>
<span>    info <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"country"</span>, <span class="st">"continent"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="setting-panel-options">Setting panel options<a class="anchor" aria-label="anchor" href="#setting-panel-options"></a>
</h3>
<p>Trelliscope has defaults for how it will write out and show panel
columns in a data frame. In our example, if we were to write out our
<code>tdf</code> data frame, it would write our “lexp_time” panel column
as 500x500 pixel png files. Suppose we wish to render these as 600x400
pixel svg files instead. We can do this with
<code><a href="../reference/set_panel_options.html">set_panel_options()</a></code>. This function takes a named set of
parameters as input, with the names indicating a panel column name
(there can be more than one) and the values a call to
<code><a href="../reference/panel_options.html">panel_options()</a></code> which allows us to specify a
<code>width</code>, <code>height</code>, and <code>format</code> for
“lexp_time”. We also set the aspect ratio for the “flag_url” panel by
specifying a width and height ratio (5:3 being the most common aspect
ratio for flags). Note that for panels that already exist as files, the
units of width and height do not matter as the panels are dynamically
sized in the viewer and the only thing that matters is the aspect ratio
at which they are displayed.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tdf</span> <span class="op">&lt;-</span> <span class="va">tdf</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/set_panel_options.html">set_panel_options</a></span><span class="op">(</span></span>
<span>    lexp_time <span class="op">=</span> <span class="fu"><a href="../reference/panel_options.html">panel_options</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">600</span>, height <span class="op">=</span> <span class="fl">400</span>, format <span class="op">=</span> <span class="st">"svg"</span><span class="op">)</span>,</span>
<span>    flag_url <span class="op">=</span> <span class="fu"><a href="../reference/panel_options.html">panel_options</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">5</span>, height <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="setting-the-default-state-of-the-app">Setting the default state of the app<a class="anchor" aria-label="anchor" href="#setting-the-default-state-of-the-app"></a>
</h3>
<p>Trelliscope apps by default display all panels in the order as they
appear in the data frame. Often it makes sense to start the user off at
a specific point in the app, such as pre-defining a sorting or filtering
state, or defining which panel labels you want the user to see
initially.</p>
<div class="section level4">
<h4 id="set_default_labels">
<code>set_default_labels()</code><a class="anchor" aria-label="anchor" href="#set_default_labels"></a>
</h4>
<p>By default, the “key columns” will be shown as labels. If we’d like
to change what labels are shown when the display is opened, we can use
<code><a href="../reference/set_default_labels.html">set_default_labels()</a></code>, e.g.:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tdf</span> <span class="op">&lt;-</span> <span class="va">tdf</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/set_default_labels.html">set_default_labels</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"country"</span>, <span class="st">"continent"</span>, <span class="st">"wiki_link"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="set_default_layout">
<code>set_default_layout()</code><a class="anchor" aria-label="anchor" href="#set_default_layout"></a>
</h4>
<p>We can also set the default panel layout, for example that we wish to
see 5 columns of panels on the initial view of the app (number of rows
is computed based on the size of the user’s browser window and the
aspect ratio of the panels).</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tdf</span> <span class="op">&lt;-</span> <span class="va">tdf</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/set_default_layout.html">set_default_layout</a></span><span class="op">(</span>ncol <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="set_default_sort">
<code>set_default_sort()</code><a class="anchor" aria-label="anchor" href="#set_default_sort"></a>
</h4>
<p>We can set the default sort order with
<code><a href="../reference/set_default_sort.html">set_default_sort()</a></code>. For this, we provide a vector of
variable names and a vector of “asc” or “desc” values inidicatingm an
ascending or descending sort order.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tdf</span> <span class="op">&lt;-</span> <span class="va">tdf</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/set_default_sort.html">set_default_sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"continent"</span>, <span class="st">"mean_lexp"</span><span class="op">)</span>, dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"asc"</span>, <span class="st">"desc"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="set_default_filters">
<code>set_default_filters()</code><a class="anchor" aria-label="anchor" href="#set_default_filters"></a>
</h4>
<p>We can set the default filter state with
<code><a href="../reference/set_default_filters.html">set_default_filters()</a></code>. Currently there are two different
kinds of filters:</p>
<ul>
<li>
<code>filter_range(varname, min = ..., max = ...)</code>: works with
numeric, date, or datetime variables</li>
<li>
<code>filter_string(varname, values = ...)</code>: works with factor
or string variables</li>
</ul>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tdf</span> <span class="op">&lt;-</span> <span class="va">tdf</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/set_default_filters.html">set_default_filters</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/filter_string.html">filter_string</a></span><span class="op">(</span><span class="st">"continent"</span>, values <span class="op">=</span> <span class="st">"Africa"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="../reference/filter_range.html">filter_range</a></span><span class="op">(</span><span class="st">"mean_lexp"</span>, max <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>More types of filters are planned in the future.</p>
</div>
</div>
<div class="section level3">
<h3 id="defining-views">Defining “views”<a class="anchor" aria-label="anchor" href="#defining-views"></a>
</h3>
<p>Views are predefined sets of state that are made available in the
viewer to help the user conveniently get to regions of the display that
are interesting in different ways. You can add a view chaining the
display through the <code><a href="../reference/add_view.html">add_view()</a></code> function.</p>
<p><code><a href="../reference/add_view.html">add_view()</a></code> takes a <code>name</code> as its first
argument, and then any number of state specifications. The functions
available to set the state are the following:</p>
<ul>
<li><code><a href="../reference/state_layout.html">state_layout()</a></code></li>
<li><code><a href="../reference/state_labels.html">state_labels()</a></code></li>
<li><code><a href="../reference/state_sort.html">state_sort()</a></code></li>
<li><code><a href="../reference/filter_string.html">filter_string()</a></code></li>
<li><code><a href="../reference/filter_range.html">filter_range()</a></code></li>
</ul>
<p>The <code>state_*()</code> functions have the same parameters as and
behave similarly to their <code>set_*()</code> counterparts except that
unlike those, these do not receive a Trelliscope data frame and return a
Trelliscope data frame, but instead just specify a state. The
<code>filter_*()</code> functions we have seen already.</p>
<p>For example, suppose we wish to add a view that only shows countries
with median life expectancy greater than or equal to 60, sorted from
highest to lowest median life expectancy:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tdf</span> <span class="op">&lt;-</span> <span class="va">tdf</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_view.html">add_view</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"Countries with high life expectancy (mean &gt;= 60)"</span>,</span>
<span>    <span class="fu"><a href="../reference/filter_range.html">filter_range</a></span><span class="op">(</span><span class="st">"mean_lexp"</span>, min <span class="op">=</span> <span class="fl">60</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="../reference/state_sort.html">state_sort</a></span><span class="op">(</span><span class="st">"mean_lexp"</span>, dir <span class="op">=</span> <span class="st">"desc"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>You can add as many views as you would like by chaining more calls to
<code><a href="../reference/add_view.html">add_view()</a></code>.</p>
</div>
<div class="section level3">
<h3 id="specifying-user-inputs">Specifying user inputs<a class="anchor" aria-label="anchor" href="#specifying-user-inputs"></a>
</h3>
<p>You can add user inputs that are attached to each panel of the
display using the <code><a href="../reference/add_inputs.html">add_inputs()</a></code> function. This function
takes any number of arguments created by any of the following
functions:</p>
<ul>
<li><code>input_radio(name, label, options)</code></li>
<li><code>input_text(name, label, width, height)</code></li>
<li><code>input_checkbox(name, label, options)</code></li>
<li><code>input_select(name, label, options)</code></li>
<li><code>input_multiselect(name, label, options)</code></li>
<li><code>input_number(name, label)</code></li>
</ul>
<p>These specify different input types.</p>
<p>For example, if we want a free text input for comments as well as
yes/no question asking if the data looks correct for the panel, we can
do the following.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tdf</span> <span class="op">&lt;-</span> <span class="va">tdf</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_inputs.html">add_inputs</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/input_text.html">input_text</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"comments"</span>, label <span class="op">=</span> <span class="st">"Comments about this panel"</span>,</span>
<span>      height <span class="op">=</span> <span class="fl">6</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="../reference/input_radio.html">input_radio</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"looks_correct"</span>,</span>
<span>      label <span class="op">=</span> <span class="st">"Does the data look correct?"</span>, options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"no"</span>, <span class="st">"yes"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Since the Trelliscope app is not backed by a server, persistent
storage of user inputs is currently not supported. If you need to get
inputs back from a user, an optional <code>email</code> argument can be
provided which will help the user know how to get these back to you.</p>
<p>Let’s see how all of these operations are reflected in our
Trelliscope data frame:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/show_info.html">show_info</a></span><span class="op">(</span><span class="va">tdf</span><span class="op">)</span></span>
<span><span class="co">#&gt; A trelliscope display</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="font-weight: bold;">Name</span>: <span style="color: #0000BB;">"gapminder life expectancy"</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="font-weight: bold;">Description</span>: <span style="color: #0000BB;">"gapminder life expectancy"</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="font-weight: bold;">Tags</span>: <span style="font-style: italic;">none</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="font-weight: bold;">Key columns</span>: <span style="color: #0000BB;">"country"</span>, <span style="color: #0000BB;">"continent"</span>, and <span style="color: #0000BB;">"iso_alpha2"</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="font-weight: bold;">Path</span>:</span></span>
<span><span class="co">#&gt;   <span style="color: #9E9E9E;">"/home/runner/work/trelliscope/trelliscope/docs/articles/trelliscope_files/figure-html//gap1"</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> <span style="font-weight: bold;">Number of panels</span>: <span style="color: #0000BB;">142</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="writing-and-viewing-the-app">Writing and viewing the app<a class="anchor" aria-label="anchor" href="#writing-and-viewing-the-app"></a>
</h3>
<p>Now that we have built up our Trelliscope data frame, we can write it
out as specified before with <code><a href="../reference/write_trelliscope.html">write_trelliscope()</a></code>.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/write_trelliscope.html">write_trelliscope</a></span><span class="op">(</span><span class="va">tdf</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Inferred that variable 'mean_gdp' should be shown on log scale.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Inferred that variable 'max_lexp_pct_chg' should be shown on log scale.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> No default <span style="color: #0000BB;">"layout"</span> state supplied for view 'Countries with high life</span></span>
<span><span class="co">#&gt;   expectancy (mean &gt;= 60)'. <span style="font-style: italic;">Using ncol=3.</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> No default <span style="color: #0000BB;">"labels"</span> state supplied for view 'Countries with high life</span></span>
<span><span class="co">#&gt;   expectancy (mean &gt;= 60)'. <span style="font-style: italic;">Using country, continent, iso_alpha2.</span></span></span>
<span><span class="co">#&gt; Writing lexp_time <span style="color: #00BB00;">■■■                             </span>   8% | ETA: 13s</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Writing lexp_time <span style="color: #00BB00;">■■■■■■■■                        </span>  25% | ETA: 11s</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Writing lexp_time <span style="color: #00BB00;">■■■■■■■■■■■■■■                  </span>  44% | ETA:  8s</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Writing lexp_time <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■            </span>  63% | ETA:  6s</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Writing lexp_time <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■      </span>  82% | ETA:  3s</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Writing lexp_time <span style="color: #00BB00;">■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ </span> 100% | ETA:  0s</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Trelliscope written to</span></span>
<span><span class="co">#&gt;   /home/runner/work/trelliscope/trelliscope/docs/articles/trelliscope_files/figure-html//gap1/index.html</span></span>
<span><span class="co">#&gt;   Open this file or call view_trelliscope() to view.</span></span></code></pre></div>
<p>This writes the panels if they haven’t been written yet and then
writes out a JSON representation of all of the other specifications we
have made for the app to consume.</p>
<p>Here is the final output.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/view_trelliscope.html">view_trelliscope</a></span><span class="op">(</span><span class="va">tdf</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Replacing existing meta variable definition for country</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Replacing existing meta variable definition for continent</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Replacing existing meta variable definition for iso_alpha2</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Replacing existing meta variable definition for lexp_time</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Replacing existing meta variable definition for flag_url</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Replacing existing meta variable definition for mean_lexp</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Inferred that variable 'mean_gdp' should be shown on log scale.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Replacing existing meta variable definition for mean_gdp</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Inferred that variable 'max_lexp_pct_chg' should be shown on log scale.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Replacing existing meta variable definition for max_lexp_pct_chg</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Replacing existing meta variable definition for dt_lexp_max_pct_chg</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Replacing existing meta variable definition for wiki_link</span></span></code></pre></div>
<div style="width: 100%; height: 630px; padding-bottom: 5px;">
<iframe style="
        transform: scale(0.6);
        width: 166.666666666667%;
        height: 1050px;
        margin: 0;
        padding: 0;
        border: 1px solid #efefef;
        transform-origin: top left;
      " src="trelliscope_files/figure-html//gap1/index.html" title="gapminder life expectancy" width="166.666666666667%px" height="1050pxpx" allowfullscreen>
</iframe>
</div>
<p>Note that we can bypass <code><a href="../reference/write_trelliscope.html">write_trelliscope()</a></code> by going
straight to <code><a href="../reference/view_trelliscope.html">view_trelliscope()</a></code> but
<code><a href="../reference/write_trelliscope.html">write_trelliscope()</a></code> allows us to do things like force
already-written panels to re-render.</p>
</div>
<div class="section level3">
<h3 id="putting-it-all-together">Putting it all together<a class="anchor" aria-label="anchor" href="#putting-it-all-together"></a>
</h3>
<p>This example illustrates most of the features available in
Trelliscope. As seen in the initial examples, Trelliscope displays can
be created with minimal code, but additional functionality can be added
with more code. A good amount of this code is already natural to you as
we are in many cases simply updating a data frame with new columns, etc.
The rest of the code is simply specifying the desired state of the
app.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create initial Trelliscope data frame</span></span>
<span><span class="va">tdf</span> <span class="op">&lt;-</span> <span class="op">(</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">gap</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">life_exp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/facet_panels.html">facet_panels</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">continent</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/as_panels_df.html">as_panels_df</a></span><span class="op">(</span>panel_col <span class="op">=</span> <span class="st">"lexp_time"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/as_trelliscope_df.html">as_trelliscope_df</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"gapminder life expectancy"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># add variables</span></span>
<span><span class="va">gsumm</span> <span class="op">&lt;-</span> <span class="va">gap</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>pct_chg <span class="op">=</span> <span class="fl">100</span> <span class="op">*</span> <span class="op">(</span><span class="va">life_exp</span> <span class="op">-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="va">life_exp</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="va">life_exp</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    mean_lexp <span class="op">=</span> <span class="fu"><a href="../reference/number.html">number</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">life_exp</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>    mean_gdp <span class="op">=</span> <span class="fu"><a href="../reference/currency.html">currency</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">gdp_percap</span><span class="op">)</span>, code <span class="op">=</span> <span class="st">"USD"</span><span class="op">)</span>,</span>
<span>    max_lexp_pct_chg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">pct_chg</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    dt_lexp_max_pct_chg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">year</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.min.html" class="external-link">which.max</a></span><span class="op">(</span><span class="va">pct_chg</span><span class="op">)</span><span class="op">]</span>, <span class="st">"-01-01"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    wiki_link <span class="op">=</span> <span class="fu"><a href="../reference/href.html">href</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"https://en.wikipedia.org/wiki/"</span>, <span class="va">country</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    .by <span class="op">=</span> <span class="va">country</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">tdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">tdf</span>, <span class="va">gsumm</span>, by <span class="op">=</span> <span class="st">"country"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># set varialbe labels</span></span>
<span><span class="va">tdf</span> <span class="op">&lt;-</span> <span class="va">tdf</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/set_var_labels.html">set_var_labels</a></span><span class="op">(</span></span>
<span>    mean_lexp <span class="op">=</span> <span class="st">"Mean life expectancy"</span>,</span>
<span>    mean_gdp <span class="op">=</span> <span class="st">"Mean GDP per capita"</span>,</span>
<span>    max_lexp_pct_chg <span class="op">=</span> <span class="st">"Max % year-to-year change in life expectancy"</span>,</span>
<span>    dt_lexp_max_pct_chg <span class="op">=</span> <span class="st">"Date of max % year-to-year change in life expectancy"</span>,</span>
<span>    wiki_link <span class="op">=</span> <span class="st">"Link to country Wikipedia entry"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># set tags</span></span>
<span><span class="va">tdf</span> <span class="op">&lt;-</span> <span class="va">tdf</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/set_tags.html">set_tags</a></span><span class="op">(</span></span>
<span>    stats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mean_lexp"</span>, <span class="st">"mean_gdp"</span>, <span class="st">"max_lexp_pct_chg"</span><span class="op">)</span>,</span>
<span>    info <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"country"</span>, <span class="st">"continent"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># set panel options</span></span>
<span><span class="va">tdf</span> <span class="op">&lt;-</span> <span class="va">tdf</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/set_panel_options.html">set_panel_options</a></span><span class="op">(</span></span>
<span>    lexp_time <span class="op">=</span> <span class="fu">panel_options_lazy</span><span class="op">(</span>width <span class="op">=</span> <span class="fl">600</span>, height <span class="op">=</span> <span class="fl">400</span>, format <span class="op">=</span> <span class="st">"svg"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># set default state</span></span>
<span><span class="va">tdf</span> <span class="op">&lt;-</span> <span class="va">tdf</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/set_default_labels.html">set_default_labels</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"country"</span>, <span class="st">"continent"</span>, <span class="st">"wiki_link"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/set_default_layout.html">set_default_layout</a></span><span class="op">(</span>ncol <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/set_default_sort.html">set_default_sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"continent"</span>, <span class="st">"mean_lexp"</span><span class="op">)</span>, dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"asc"</span>, <span class="st">"desc"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/set_default_filters.html">set_default_filters</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/filter_string.html">filter_string</a></span><span class="op">(</span><span class="st">"continent"</span>, values <span class="op">=</span> <span class="st">"Africa"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="../reference/filter_range.html">filter_range</a></span><span class="op">(</span><span class="st">"mean_lexp"</span>, max <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># add a view</span></span>
<span><span class="va">tdf</span> <span class="op">&lt;-</span> <span class="va">tdf</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_view.html">add_view</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"Countries with high life expectancy (mean &gt;= 60)"</span>,</span>
<span>    <span class="fu"><a href="../reference/filter_range.html">filter_range</a></span><span class="op">(</span><span class="st">"mean_lexp"</span>, min <span class="op">=</span> <span class="fl">60</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="../reference/state_sort.html">state_sort</a></span><span class="op">(</span><span class="st">"mean_lexp"</span>, dir <span class="op">=</span> <span class="st">"desc"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># add user inputs</span></span>
<span><span class="va">tdf</span> <span class="op">&lt;-</span> <span class="va">tdf</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_inputs.html">add_inputs</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/input_text.html">input_text</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"comments"</span>, label <span class="op">=</span> <span class="st">"Comments about this panel"</span>,</span>
<span>      height <span class="op">=</span> <span class="fl">6</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="../reference/input_radio.html">input_radio</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"looks_correct"</span>,</span>
<span>      label <span class="op">=</span> <span class="st">"Does the data look correct?"</span>, options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"no"</span>, <span class="st">"yes"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># view the display</span></span>
<span><span class="fu"><a href="../reference/view_trelliscope.html">view_trelliscope</a></span><span class="op">(</span><span class="va">tdf</span><span class="op">)</span></span></code></pre></div>
<p>A few additional features are available in Trelliscope that we have
not covered here and can be found by visiting other articles in this
documentation:</p>
<ul>
<li><a href="panels.html">A deeper dive into creating panel
columns</a></li>
<li><a href="embed.html">Sharing and embedding Trelliscope
displays</a></li>
<li><a href="bigdata.html">Visualizing very large datasets with
Trelliscope</a></li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://ryanhafen.com" class="external-link">Ryan Hafen</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
